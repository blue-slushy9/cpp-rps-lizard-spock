Trying this in C++ instead of C, because working with objects in C was a pain!